<app-controle-acces [avoirAccee]="informationGenerale.verifierAccee('modifierBonPrelevement')"></app-controle-acces>


<div class="row" *ngIf="informationGenerale.verifierAccee('modifierBonPrelevement')">
    <div class="col-sm-12">
        <app-card [hidHeader]="true">
            <!-- Partie Header -->
            <div class="form-group row">
                <div class="col-sm-6">
                    <div class="text-titre">
                        <h3>Modifier Bon Travail</h3>
                    </div>
                    <div class="left-button">
                        <button *ngIf="!isLoading" class="btn btn-primary float-left"
                            (click)="modifierBonPrelevement()">
                            Modifier
                        </button>
                        <button *ngIf="isLoading" class="btn btn-primary" disabled>
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            Chargement...
                        </button>
                    </div>
                </div>
                   

            </div>
            <hr>
            <div class="row">
                <!-- Partie formulaire à Gauche en haut -->
                <div class="col-sm-6">
                    <form action="javascript:" style="margin-left: 50px;">
                        <div class="form-group row">
                            <label for="numero" class="col-sm-4 col-form-label">Numero</label>
                            <div class="col-sm-8">
                                <input type="input" class="form-control" name="numero" id="numero"
                                    placeholder="Exemple: BT21-00001" [(ngModel)]="bonPrelevement.numero">
                                <p *ngIf="erreurBonPrelevement.numero != ''" class="erreur">
                                    {{erreurBonPrelevement.numero}}
                                </p>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="date" class="col-sm-4 col-form-label">Date</label>
                            <div class="col-sm-8">
                                <input type="date" class="form-control" id="date" name="date"
                                    [(ngModel)]="bonPrelevement.date">
                                <p *ngIf="erreurBonPrelevement.date != ''" class="erreur">{{erreurBonPrelevement.date}}
                                </p>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Partie formulaire à Gauche en haut -->
                <div class="col-sm-6">
                    <form action="javascript:" style="margin-left: 50px;">
                        <div class="form-group row">
                            <label for="personnel" class="col-sm-4 col-form-label">Personnel</label>
                            <div class="col-sm-8">
                                <input type="personnel" class="form-control" id="personnel" name="personnel"
                                    [(ngModel)]="bonPrelevement.personnel">
                                <p *ngIf="erreurBonPrelevement.personnel != ''" class="erreur">
                                    {{erreurBonPrelevement.personnel}}</p>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="magasinier" class="col-sm-4 col-form-label">Magasinier</label>
                            <div class="col-sm-8">
                                <input type="magasinier" class="form-control" id="magasinier" name="magasinier"
                                    [(ngModel)]="bonPrelevement.magasinier">
                                <p *ngIf="erreurBonPrelevement.magasinier != ''" class="erreur">
                                    {{erreurBonPrelevement.magasinier}}</p>
                            </div>
                        </div>
                    </form>
                </div>
                <!-- partie tabs -->
                <div class="col-md-12">
                    <ngb-tabset type="pills">
                        <!-- partie Article -->
                        <ngb-tab title="Articles" class="mb-3">
                            <ng-template ngbTabContent>
                                <div class="col-xl-14" style="margin-top: 10px;">
                                    <app-ligne-btravails [articlesSelected]="articles" [bonLivraison]="bonPrelevement"
                                        [articles]="allArticles">
                                    </app-ligne-btravails>
                                </div>
                            </ng-template>
                        </ngb-tab>
                        <!-- partie Réglements -->
                        <ngb-tab title="Reglements" class="mb-3">
                            <ng-template ngbTabContent>
                                <div class="col-xl-14" style="margin-top: 10px;">
                                           <app-reglements-bon-livraison></app-reglements-bon-livraison>
                                </div>
                            </ng-template>
                        </ngb-tab>
                    </ngb-tabset>
                </div>
            </div>
        </app-card>
    </div>
</div>